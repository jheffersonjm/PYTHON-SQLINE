import os #interage com o sistema operacional (Janela OS)
import sqlite3
from sqlite3 import Error

# cria a conexão com o sqlite
def conexaoBanco():
    caminho = './agenda.db'
    #variavel de conexão
    con=None
    #criar uma validação para o erro
    try:
        con=sqlite3.connect(caminho)
    except Error as ex:
        print(ex)
    return con

vcon=conexaoBanco()

#criar uma função abstrata para fazer todas as transções
# com o banco de dados
def query(conexao, sql):
    try:
        c = conexao.cursor() #chama o cursor
        c.execute(sql)
        conexao.commit()
    except Error as ex:
        print(ex)
    finally:
        print('Operação realiza com sucesso!')

#criar a função que consulta os dados
def consultar(conexao, sql):
    c = conexao.cursor()
    c.execute(sql)
    res = c.fetchall()
    return res

# criar o menu do programa
def menuPrincial():
    os.system("cls")
    print("\n")
    print("1 - Inserir novo Registro")
    print("2 - Deletar Registro")
    print("3 - Atualizar Registro")
    print("4 - Consultar Registro")
    print("5 - Consultar Registro por Nome")
    print("6 - Sair")

def menuInserir():
    os.system("cls")
    print("\n")
    vnome = input('Digite o nome: ')
    vtelefone = input("Digite o telefone: ")
    vemail = input('Digite seu E-mail: ')
    vsql = ("INSERT INTO tb_contatos (nome_contato, telefone_contato,"
            "email_contato) VALUES ('"+vnome+"', '"+vtelefone+"', '"
            +vemail+"');")
    query(vcon, vsql)

opc=0
while opc!=6:
    menuPrincial()
    #ler a opção que o user vai digitar
    opc=int(input('Digite uma opção: '))
    #verificar qual a opção o user inseriu
    if opc==1:
        None
    elif opc==2:
     menuInserir()
    elif opc==3:
        None
    elif opc==4:
        None
    elif opc==5:
        None
    elif opc==6:
        None


def procurar():
    os.system('cls')
    print('\n')
    vsql= 'SELECT * FROM tb_contatos ORDER BY id DESC'
    res = consultar(vcon, vsql)
    vlin= 10
    vcont= 0
    for r  in res:
        print('Id: {0: <3}, nome {1 <30} Telefone: {2 : <14} Gmail: {3 : <1}'.format(r[0], r[1], r[2], r[3]))
        vcont+=1
        if vcont==vlin:
            vcont=0
            os=system('stop')
            os.system('cls')

print('fin da lista')
os.system('stop')
